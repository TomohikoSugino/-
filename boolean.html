<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <style>
  	body{
  		height: 100vh;
  	}
  </style>
  <title>サンプル</title>
  </head>
  <body>
     <p>マウスを動かすと以下の値が更新されます。</p>
  <div id="result">
    <ul>
      <li class="clientx">clientX: <b>987</b></li>
      <li class="clienty">clientY: <b>595</b></li>
    </ul>
  </div>
  
  <h1>Buffer source</h1>
    <button id="play">Play</button><br/>
    <button id="stop">stop</button><br/>

   <script>
  window.addEventListener("load", function () {
  window.onmousemove = function (e) {
    document.querySelector(".clientx b").innerHTML = e.clientX;
    document.querySelector(".clienty b").innerHTML = e.clientY;
    let width = document.body.clientWidth
    let height = document.body.clientHeight
    let Lsound = width/3
    let Rsound = Lsound*2
    let Bsound = height*0.75
    
    if(e.clientX<Lsound && Bsound>e.clientY){
        play()
    	  timerid = window.setTimeout(function(){
        window.location.href = 'design.html'; // 遷移
        }, 10000);
    } else if(e.clientX>Rsound && Bsound>e.clientY){
    	
    	timerid = window.setTimeout(function(){
        window.location.href = 'design.html'; // 遷移
        }, 10000);
    }else{
    }
  };
});



window.AudioContext = window.AudioContext || window.webkitAudioContext;
const ctx = new AudioContext();

let sampleSource;
let playCAT = false;


async function setupSample() {
  const response = await fetch("./cat.mp3");
  const arrayBuffer = await response.arrayBuffer();
  const audioCAT = await ctx.decodeAudioData(arrayBuffer);
  return audioCAT;
}

function playSample(ctx, audioCAT) {
  sampleSource = ctx.createBufferSource();
  sampleSource.buffer = audioCAT;
  sampleSource.connect(ctx.destination);
  sampleSource.start();
  playCAT = true;
}


async function play() {
  if (!playCAT) {
    // ここで再生を実行
  if (playCAT) return;
    const sample = await setupSample();
    playSample(ctx, sample);
  }
  playCAT= true;
}




  </script>
  </body>